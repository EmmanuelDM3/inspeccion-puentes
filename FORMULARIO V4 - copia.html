<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOPC - Formulario de Inspecci√≥n de Puentes</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=Libre+Baskerville:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --azul-rd: #002D62;
            --rojo-rd: #CE1126;
            --blanco: #FFFFFF;
            --gris-claro: #F5F7FA;
            --gris-medio: #8B95A5;
            --gris-oscuro: #374151;
            --verde-excelente: #059669;
            --amarillo-advertencia: #D97706;
            --rojo-critico: #DC2626;
            --sombra: 0 1px 3px rgba(0,0,0,0.1);
            --sombra-elevada: 0 10px 25px rgba(0,0,0,0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'IBM Plex Sans', sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: var(--gris-oscuro);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: var(--sombra-elevada);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, var(--azul-rd) 0%, #003d7a 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            border-radius: 50%;
        }

        .logo-placeholder {
            background: rgba(255,255,255,0.15);
            border: 2px dashed rgba(255,255,255,0.3);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            font-size: 14px;
            font-weight: 500;
            letter-spacing: 0.5px;
        }

        h1 {
            font-family: 'Libre Baskerville', serif;
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .subtitle {
            font-size: 15px;
            opacity: 0.9;
            font-weight: 400;
        }

        .form-content {
            padding: 40px 30px;
        }

        .section {
            margin-bottom: 50px;
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-title {
            font-family: 'Libre Baskerville', serif;
            font-size: 22px;
            color: var(--azul-rd);
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 3px solid var(--azul-rd);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-number {
            background: var(--azul-rd);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 700;
        }

        .subsection-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--rojo-rd);
            margin: 30px 0 20px 0;
            padding-left: 15px;
            border-left: 4px solid var(--rojo-rd);
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--gris-oscuro);
            font-size: 14px;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 15px;
            font-family: 'IBM Plex Sans', sans-serif;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--azul-rd);
            box-shadow: 0 0 0 3px rgba(0, 45, 98, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .input-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .btn-gps {
            background: var(--verde-excelente);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .btn-gps:hover {
            background: #047857;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
        }

        .btn-gps:active {
            transform: translateY(0);
        }

        .evaluation-item {
            background: var(--gris-claro);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
        }

        .evaluation-item:hover {
            border-left-color: var(--azul-rd);
            box-shadow: var(--sombra);
        }

        .evaluation-header {
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 15px;
            color: var(--gris-oscuro);
        }

        .checkbox-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .checkbox-wrapper input[type="checkbox"] {
            width: 22px;
            height: 22px;
            cursor: pointer;
        }

        .severity-scale {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px dashed #d1d5db;
        }

        .severity-scale.active {
            display: block;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                max-height: 0;
            }
            to {
                opacity: 1;
                max-height: 500px;
            }
        }

        .severity-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .severity-btn {
            flex: 1;
            min-width: 80px;
            padding: 12px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 14px;
        }

        .severity-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--sombra);
        }

        .severity-btn.selected {
            border-width: 3px;
        }

        .severity-btn.level-5 {
            border-color: var(--verde-excelente);
            color: var(--verde-excelente);
        }

        .severity-btn.level-5.selected {
            background: var(--verde-excelente);
            color: white;
        }

        .severity-btn.level-4 {
            border-color: #10B981;
            color: #10B981;
        }

        .severity-btn.level-4.selected {
            background: #10B981;
            color: white;
        }

        .severity-btn.level-3 {
            border-color: var(--amarillo-advertencia);
            color: var(--amarillo-advertencia);
        }

        .severity-btn.level-3.selected {
            background: var(--amarillo-advertencia);
            color: white;
        }

        .severity-btn.level-2 {
            border-color: #F59E0B;
            color: #F59E0B;
        }

        .severity-btn.level-2.selected {
            background: #F59E0B;
            color: white;
        }

        .severity-btn.level-1 {
            border-color: var(--rojo-critico);
            color: var(--rojo-critico);
        }

        .severity-btn.level-1.selected {
            background: var(--rojo-critico);
            color: white;
        }

        .photo-upload {
            margin-top: 15px;
        }

        .photo-upload input[type="file"] {
            border: 2px dashed #d1d5db;
            padding: 20px;
            background: #f9fafb;
            cursor: pointer;
        }

        .photo-upload input[type="file"]:hover {
            border-color: var(--azul-rd);
            background: var(--gris-claro);
        }

        .photo-preview {
            margin-top: 10px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
        }

        .photo-preview img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            box-shadow: var(--sombra);
        }

        .alert {
            padding: 16px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            font-size: 14px;
            line-height: 1.5;
        }

        .alert-warning {
            background: #FEF3C7;
            border-left: 4px solid var(--amarillo-advertencia);
            color: #92400E;
        }

        .alert-danger {
            background: #FEE2E2;
            border-left: 4px solid var(--rojo-critico);
            color: #991B1B;
        }

        .alert-info {
            background: #DBEAFE;
            border-left: 4px solid var(--azul-rd);
            color: #1E3A8A;
        }

        .result-panel {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            padding: 30px;
            border-radius: 12px;
            margin-top: 40px;
            border: 2px solid #e5e7eb;
        }

        .result-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--azul-rd);
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            margin-bottom: 12px;
            box-shadow: var(--sombra);
        }

        .result-label {
            font-weight: 600;
            color: var(--gris-oscuro);
        }

        .result-value {
            font-weight: 700;
            font-size: 18px;
            padding: 8px 16px;
            border-radius: 6px;
        }

        .priority-high {
            background: var(--rojo-critico);
            color: white;
        }

        .priority-medium {
            background: var(--amarillo-advertencia);
            color: white;
        }

        .priority-low {
            background: var(--verde-excelente);
            color: white;
        }

        .submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--azul-rd) 0%, #003d7a 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 30px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 45, 98, 0.3);
        }

        .submit-btn:active {
            transform: translateY(-1px);
        }

        .required {
            color: var(--rojo-rd);
            margin-left: 3px;
        }

        .helper-text {
            font-size: 13px;
            color: var(--gris-medio);
            margin-top: 5px;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .input-group {
                grid-template-columns: 1fr;
            }

            .severity-options {
                flex-direction: column;
            }

            .severity-btn {
                min-width: 100%;
            }

            .form-content {
                padding: 30px 20px;
            }

            h1 {
                font-size: 24px;
            }
        }

        .info-box {
            background: linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 100%);
            border-left: 4px solid var(--azul-rd);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .info-box-title {
            font-weight: 700;
            color: var(--azul-rd);
            margin-bottom: 10px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-placeholder">
                [LOGO MOPC REP√öBLICA DOMINICANA]
            </div>
            <h1>Formulario de Inspecci√≥n de Puentes</h1>
            <p class="subtitle">Ministerio de Obras P√∫blicas y Comunicaciones</p>
        </div>

        <form id="inspectionForm" class="form-content">
            <!-- SECCI√ìN 1: INFORMACI√ìN GENERAL -->
            <div class="section">
                <h2 class="section-title">
                    <span class="section-number">1</span>
                    Informaci√≥n General
                </h2>

                <div class="form-group">
                    <label>Identificador √önico <span class="required">*</span></label>
                    <input type="text" id="identificador" required>
                </div>

                <div class="form-group">
                    <label>Nombre de la Estructura <span class="required">*</span></label>
                    <input type="text" id="nombreEstructura" required>
                </div>

                <div class="input-group">
                    <div class="form-group">
                        <label>Provincia <span class="required">*</span></label>
                        <select id="provincia" required>
                            <option value="">Seleccione...</option>
                            <option value="Azua">Azua</option>
                            <option value="Baoruco">Baoruco</option>
                            <option value="Barahona">Barahona</option>
                            <option value="Dajab√≥n">Dajab√≥n</option>
                            <option value="Distrito Nacional">Distrito Nacional</option>
                            <option value="Duarte">Duarte</option>
                            <option value="El√≠as Pi√±a">El√≠as Pi√±a</option>
                            <option value="El Seibo">El Seibo</option>
                            <option value="Espaillat">Espaillat</option>
                            <option value="Hato Mayor">Hato Mayor</option>
                            <option value="Hermanas Mirabal">Hermanas Mirabal</option>
                            <option value="Independencia">Independencia</option>
                            <option value="La Altagracia">La Altagracia</option>
                            <option value="La Romana">La Romana</option>
                            <option value="La Vega">La Vega</option>
                            <option value="Mar√≠a Trinidad S√°nchez">Mar√≠a Trinidad S√°nchez</option>
                            <option value="Monse√±or Nouel">Monse√±or Nouel</option>
                            <option value="Monte Cristi">Monte Cristi</option>
                            <option value="Monte Plata">Monte Plata</option>
                            <option value="Pedernales">Pedernales</option>
                            <option value="Peravia">Peravia</option>
                            <option value="Puerto Plata">Puerto Plata</option>
                            <option value="Saman√°">Saman√°</option>
                            <option value="San Crist√≥bal">San Crist√≥bal</option>
                            <option value="San Jos√© de Ocoa">San Jos√© de Ocoa</option>
                            <option value="San Juan">San Juan</option>
                            <option value="San Pedro de Macor√≠s">San Pedro de Macor√≠s</option>
                            <option value="S√°nchez Ram√≠rez">S√°nchez Ram√≠rez</option>
                            <option value="Santiago">Santiago</option>
                            <option value="Santiago Rodr√≠guez">Santiago Rodr√≠guez</option>
                            <option value="Santo Domingo">Santo Domingo</option>
                            <option value="Valverde">Valverde</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Municipio <span class="required">*</span></label>
                        <input type="text" id="municipio" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Localidad m√°s cercana</label>
                    <input type="text" id="localidad">
                </div>

                <div class="info-box">
                    <div class="info-box-title">üìç Geolocalizaci√≥n GPS</div>
                    <p>Capture la ubicaci√≥n actual del puente para registro preciso</p>
                </div>

                <div class="input-group">
                    <div class="form-group">
                        <label>Latitud <span class="required">*</span></label>
                        <input type="number" step="any" id="latitud" required readonly>
                    </div>

                    <div class="form-group">
                        <label>Longitud <span class="required">*</span></label>
                        <input type="number" step="any" id="longitud" required readonly>
                    </div>
                </div>

                <button type="button" class="btn-gps" onclick="obtenerUbicacion()">
                    üìç Capturar Ubicaci√≥n Actual
                </button>

                <div class="input-group">
                    <div class="form-group">
                        <label>Zona S√≠smica</label>
                        <select id="zonaSismica">
                            <option value="">Seleccione...</option>
                            <option value="I">Zona I</option>
                            <option value="II">Zona II</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Campo</label>
                        <select id="campo">
                            <option value="">Seleccione...</option>
                            <option value="Cercano">Campo Cercano</option>
                            <option value="Lejano">Campo Lejano</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>V√≠a que cruza <span class="required">*</span></label>
                    <input type="text" id="viaCruza" placeholder="Ej: Autopista Duarte, Carretera S√°nchez..." required>
                    <p class="helper-text">Nombre de carretera, autopista, camino, etc.</p>
                </div>

                <div class="form-group">
                    <label>Obst√°culo que cruza <span class="required">*</span></label>
                    <input type="text" id="obstaculoCruza" placeholder="Ej: R√≠o Cam√∫, Arroyo Hondo..." required>
                    <p class="helper-text">R√≠o, arroyo, ca√±ada, ferrocarril, otra v√≠a, desnivel, etc.</p>
                </div>

                <div class="input-group">
                    <div class="form-group">
                        <label>Fecha de Inspecci√≥n <span class="required">*</span></label>
                        <input type="date" id="fechaInspeccion" required>
                    </div>

                    <div class="form-group">
                        <label>Inspector(es) <span class="required">*</span></label>
                        <input type="text" id="inspectores" placeholder="Nombres separados por punto y coma" required>
                    </div>
                </div>
            </div>

            <!-- SECCI√ìN 2: CARACTER√çSTICAS PRINCIPALES -->
            <div class="section">
                <h2 class="section-title">
                    <span class="section-number">2</span>
                    Caracter√≠sticas Principales del Puente
                </h2>

                <div class="form-group">
                    <label>Tipo de Estructura Principal <span class="required">*</span></label>
                    <select id="tipoEstructura" required onchange="mostrarCampoOtro('tipoEstructura', 'otroTipoEstructura')">
                        <option value="">Seleccione...</option>
                        <option value="Losa maciza">1Ô∏è‚É£ Losa maciza</option>
                        <option value="Viga-losa">2Ô∏è‚É£ Viga-losa</option>
                        <option value="Viga caj√≥n">3Ô∏è‚É£ Viga caj√≥n (Box Girder)</option>
                        <option value="Cercha">4Ô∏è‚É£ Cercha (Truss)</option>
                        <option value="Arco">5Ô∏è‚É£ Arco</option>
                        <option value="Atirantado">6Ô∏è‚É£ Atirantado</option>
                        <option value="Colgante">7Ô∏è‚É£ Colgante</option>
                        <option value="Marco/P√≥rtico">8Ô∏è‚É£ Marco / P√≥rtico</option>
                        <option value="Modular">9Ô∏è‚É£ Modular (Bailey u otro)</option>
                        <option value="Mixto">üîü Mixto</option>
                        <option value="Otro">1Ô∏è‚É£1Ô∏è‚É£ Otro</option>
                    </select>
                </div>

                <div class="form-group hidden" id="otroTipoEstructura">
                    <label>Especifique otro tipo de estructura</label>
                    <input type="text" id="otroTipoEstructuraTexto">
                </div>

                <div class="form-group">
                    <label>Tipo de Subestructura <span class="required">*</span></label>
                    <select id="tipoSubestructura" required onchange="mostrarCampoOtro('tipoSubestructura', 'otroTipoSubestructura')">
                        <option value="">Seleccione...</option>
                        <optgroup label="A. Pilas">
                            <option value="Pilas tipo columna">Pilas tipo columna</option>
                            <option value="Pilas tipo muro">Pilas tipo muro (pantalla)</option>
                            <option value="Pilas tipo p√≥rtico">Pilas tipo p√≥rtico (marco abierto)</option>
                            <option value="Pilas tipo cabezal">Pilas tipo cabezal con columnas m√∫ltiples</option>
                            <option value="Torres">Torres (puentes atirantados o colgantes)</option>
                        </optgroup>
                        <optgroup label="B. Estribos">
                            <option value="Estribos tipo muro">Estribos tipo muro (macizo)</option>
                            <option value="Estribos tipo pantalla">Estribos tipo pantalla</option>
                            <option value="Estribos cerrados">Estribos cerrados (caj√≥n)</option>
                            <option value="Estribos con aletas">Estribos con aletas (wing walls)</option>
                        </optgroup>
                        <optgroup label="C. Especiales">
                            <option value="Subestructura met√°lica">Subestructura met√°lica</option>
                            <option value="Subestructura mixta">Subestructura mixta acero-hormig√≥n</option>
                            <option value="Marco integral">Marco integral (sin pilas independientes)</option>
                        </optgroup>
                        <option value="Otro">Otro</option>
                    </select>
                </div>

                <div class="form-group hidden" id="otroTipoSubestructura">
                    <label>Especifique otro tipo de subestructura</label>
                    <input type="text" id="otroTipoSubestructuraTexto">
                </div>

                <div class="form-group">
                    <label>Tipo de Fundaci√≥n <span class="required">*</span></label>
                    <select id="tipoFundacion" required onchange="actualizarVisibilidadFundacion()">
                        <option value="">Seleccione...</option>
                        <optgroup label="A. Fundaciones Superficiales">
                            <option value="Zapata aislada">Zapata aislada</option>
                            <option value="Zapata corrida">Zapata corrida</option>
                            <option value="Losa de cimentaci√≥n">Losa de cimentaci√≥n (platea)</option>
                        </optgroup>
                        <optgroup label="B. Fundaciones Profundas">
                            <option value="Pilotes hincados">Pilotes hincados (prefabricados)</option>
                            <option value="Pilotes perforados">Pilotes perforados (in situ)</option>
                            <option value="Pilotes met√°licos">Pilotes met√°licos (HP, tubulares)</option>
                            <option value="Micropilotes">Micropilotes</option>
                        </optgroup>
                        <option value="Otro">Otro</option>
                        <option value="Desconocido">Desconocido</option>
                        <option value="No visible">No visible</option>
                    </select>
                </div>

                <div class="input-group">
                    <div class="form-group">
                        <label>Material Principal <span class="required">*</span></label>
                        <select id="materialPrincipal" required>
                            <option value="">Seleccione...</option>
                            <option value="Hormig√≥n armado">Hormig√≥n armado</option>
                            <option value="Hormig√≥n pretensado">Hormig√≥n pretensado</option>
                            <option value="Acero">Acero</option>
                            <option value="Mixto">Mixto (acero-hormig√≥n)</option>
                            <option value="Madera">Madera</option>
                            <option value="Mamposter√≠a">Mamposter√≠a</option>
                            <option value="Otro">Otro</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>N√∫mero de Tramos <span class="required">*</span></label>
                        <input type="number" id="numeroTramos" min="1" required>
                    </div>
                </div>

                <div class="input-group">
                    <div class="form-group">
                        <label>Longitud Total Aproximada (m) <span class="required">*</span></label>
                        <input type="number" step="0.01" id="longitudTotal" min="0" required>
                    </div>

                    <div class="form-group">
                        <label>Ancho de Calzada (m) <span class="required">*</span></label>
                        <input type="number" step="0.01" id="anchoCalzada" min="0" required>
                    </div>
                </div>

                <div class="input-group">
                    <div class="form-group">
                        <label>Altura Libre / G√°libo (m)</label>
                        <input type="number" step="0.01" id="alturaLibre" min="0">
                    </div>

                    <div class="form-group">
                        <label>A√±o de Construcci√≥n Estimado</label>
                        <input type="number" id="anioConstruccion" min="1800" max="2026">
                    </div>
                </div>

                <div class="form-group">
                    <label>C√≥digo Pre/Post <span class="helper-text">(Determinado autom√°ticamente)</span></label>
                    <input type="text" id="codigoPrePost" readonly style="background: #f3f4f6; cursor: not-allowed;">
                </div>
            </div>

            <!-- SECCI√ìN 3: EVALUACI√ìN VISUAL -->
            <div class="section">
                <h2 class="section-title">
                    <span class="section-number">3</span>
                    Evaluaci√≥n Visual
                </h2>

                <div class="alert alert-info">
                    <strong>‚ÑπÔ∏è Instrucciones:</strong> Marque cada falla observada y califique su severidad del 1 al 5. Adjunte foto de evidencia para cada elemento evaluado.
                </div>

                <!-- 3.1 SUPERESTRUCTURA -->
                <h3 class="subsection-title">3.1 Superestructura (Vigas y Tablero)</h3>

                <div class="subsection-title" style="font-size: 16px; color: var(--gris-oscuro); border-left-color: var(--gris-medio);">
                    A. LOSAS Y VIGAS
                </div>

                <!-- Fisuras y Grietas -->
                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_fisuras" onchange="toggleSeverityScale('fisuras')">
                        <div class="evaluation-header">1. Fisuras y Grietas Estructurales</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_fisuras">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('fisuras', 5)">
                                <div>5 - Excelente</div>
                                <small style="font-size: 11px; font-weight: 400;">Sin fisuras</small>
                            </button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('fisuras', 4)">
                                <div>4 - Bueno</div>
                                <small style="font-size: 11px; font-weight: 400;">Fisuras capilares</small>
                            </button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('fisuras', 3)">
                                <div>3 - Regular</div>
                                <small style="font-size: 11px; font-weight: 400;">Fisuras moderadas</small>
                            </button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('fisuras', 2)">
                                <div>2 - Serio</div>
                                <small style="font-size: 11px; font-weight: 400;">Grietas diagonales</small>
                            </button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('fisuras', 1)">
                                <div>1 - Cr√≠tico</div>
                                <small style="font-size: 11px; font-weight: 400;">Fractura total</small>
                            </button>
                        </div>
                        <input type="hidden" id="severity_value_fisuras">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_fisuras" onchange="previewPhoto('fisuras')">
                            <div class="photo-preview" id="preview_fisuras"></div>
                        </div>
                    </div>
                </div>

                <!-- Exposici√≥n y Corrosi√≥n -->
                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_corrosion" onchange="toggleSeverityScale('corrosion')">
                        <div class="evaluation-header">2. Exposici√≥n y Corrosi√≥n de Armadura / Cables / Perfiles</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_corrosion">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('corrosion', 5)">
                                <div>5 - Excelente</div>
                                <small style="font-size: 11px; font-weight: 400;">Acero recubierto</small>
                            </button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('corrosion', 4)">
                                <div>4 - Bueno</div>
                                <small style="font-size: 11px; font-weight: 400;">Manchas superficiales</small>
                            </button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('corrosion', 3)">
                                <div>3 - Regular</div>
                                <small style="font-size: 11px; font-weight: 400;">Spalling</small>
                            </button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('corrosion', 2)">
                                <div>2 - Serio</div>
                                <small style="font-size: 11px; font-weight: 400;">Acero expuesto</small>
                            </button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('corrosion', 1)">
                                <div>1 - Cr√≠tico</div>
                                <small style="font-size: 11px; font-weight: 400;">Acero cortado</small>
                            </button>
                        </div>
                        <input type="hidden" id="severity_value_corrosion">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_corrosion" onchange="previewPhoto('corrosion')">
                            <div class="photo-preview" id="preview_corrosion"></div>
                        </div>
                    </div>
                </div>

                <!-- Deflexiones -->
                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_deflexiones" onchange="toggleSeverityScale('deflexiones')">
                        <div class="evaluation-header">3. Deflexiones y Comportamiento Din√°mico</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_deflexiones">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('deflexiones', 5)">
                                <div>5 - Excelente</div>
                                <small style="font-size: 11px; font-weight: 400;">Viga recta</small>
                            </button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('deflexiones', 4)">
                                <div>4 - Bueno</div>
                                <small style="font-size: 11px; font-weight: 400;">Deflexi√≥n sin progresi√≥n</small>
                            </button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('deflexiones', 3)">
                                <div>3 - Regular</div>
                                <small style="font-size: 11px; font-weight: 400;">Deflexi√≥n visible</small>
                            </button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('deflexiones', 2)">
                                <div>2 - Serio</div>
                                <small style="font-size: 11px; font-weight: 400;">Vibraciones an√≥malas</small>
                            </button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('deflexiones', 1)">
                                <div>1 - Cr√≠tico</div>
                                <small style="font-size: 11px; font-weight: 400;">Hundimiento cr√≠tico</small>
                            </button>
                        </div>
                        <input type="hidden" id="severity_value_deflexiones">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_deflexiones" onchange="previewPhoto('deflexiones')">
                            <div class="photo-preview" id="preview_deflexiones"></div>
                        </div>
                    </div>
                </div>

                <!-- Da√±o por Impacto -->
                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_impacto" onchange="toggleSeverityScale('impacto')">
                        <div class="evaluation-header">4. Da√±o por Impacto Vehicular</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_impacto">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('impacto', 5)">
                                <div>5 - Excelente</div>
                                <small style="font-size: 11px; font-weight: 400;">Sin impactos</small>
                            </button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('impacto', 4)">
                                <div>4 - Bueno</div>
                                <small style="font-size: 11px; font-weight: 400;">Impacto superficial</small>
                            </button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('impacto', 3)">
                                <div>3 - Regular</div>
                                <small style="font-size: 11px; font-weight: 400;">Raspaduras</small>
                            </button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('impacto', 2)">
                                <div>2 - Serio</div>
                                <small style="font-size: 11px; font-weight: 400;">Acero expuesto</small>
                            </button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('impacto', 1)">
                                <div>1 - Cr√≠tico</div>
                                <small style="font-size: 11px; font-weight: 400;">Rotura de concreto</small>
                            </button>
                        </div>
                        <input type="hidden" id="severity_value_impacto">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_impacto" onchange="previewPhoto('impacto')">
                            <div class="photo-preview" id="preview_impacto"></div>
                        </div>
                    </div>
                </div>

                <!-- Humedad y Filtraciones -->
                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_humedad" onchange="toggleSeverityScale('humedad')">
                        <div class="evaluation-header">5. Humedad, Filtraciones y Biodeterioro</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_humedad">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('humedad', 5)">
                                <div>5 - Excelente</div>
                                <small style="font-size: 11px; font-weight: 400;">Seco y limpio</small>
                            </button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('humedad', 4)">
                                <div>4 - Bueno</div>
                                <small style="font-size: 11px; font-weight: 400;">Manchas aisladas</small>
                            </button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('humedad', 3)">
                                <div>3 - Regular</div>
                                <small style="font-size: 11px; font-weight: 400;">Filtraci√≥n activa</small>
                            </button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('humedad', 2)">
                                <div>2 - Serio</div>
                                <small style="font-size: 11px; font-weight: 400;">Saturaci√≥n constante</small>
                            </button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('humedad', 1)">
                                <div>1 - Cr√≠tico</div>
                                <small style="font-size: 11px; font-weight: 400;">Lixiviaci√≥n masiva</small>
                            </button>
                        </div>
                        <input type="hidden" id="severity_value_humedad">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_humedad" onchange="previewPhoto('humedad')">
                            <div class="photo-preview" id="preview_humedad"></div>
                        </div>
                    </div>
                </div>

                <!-- B. JUNTAS DE EXPANSI√ìN -->
                <div class="subsection-title" style="font-size: 16px; color: var(--gris-oscuro); border-left-color: var(--gris-medio); margin-top: 40px;">
                    B. JUNTAS DE EXPANSI√ìN
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_juntas_estado" onchange="toggleSeverityScale('juntas_estado')">
                        <div class="evaluation-header">1. Estado F√≠sico y Anclaje</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_juntas_estado">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('juntas_estado', 5)">5 - Alineada y firme</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('juntas_estado', 4)">4 - Desgaste normal</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('juntas_estado', 3)">3 - Sello roto</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('juntas_estado', 2)">2 - Platinas sueltas</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('juntas_estado', 1)">1 - Falla total</button>
                        </div>
                        <input type="hidden" id="severity_value_juntas_estado">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_juntas_estado" onchange="previewPhoto('juntas_estado')">
                            <div class="photo-preview" id="preview_juntas_estado"></div>
                        </div>
                    </div>
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_juntas_limpieza" onchange="toggleSeverityScale('juntas_limpieza')">
                        <div class="evaluation-header">2. Funcionalidad y Limpieza</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_juntas_limpieza">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('juntas_limpieza', 5)">5 - Libre de escombros</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('juntas_limpieza', 4)">4 - Polvo/arena suelta</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('juntas_limpieza', 3)">3 - Sedimentos</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('juntas_limpieza', 2)">2 - Vegetaci√≥n</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('juntas_limpieza', 1)">1 - Bloqueada</button>
                        </div>
                        <input type="hidden" id="severity_value_juntas_limpieza">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_juntas_limpieza" onchange="previewPhoto('juntas_limpieza')">
                            <div class="photo-preview" id="preview_juntas_limpieza"></div>
                        </div>
                    </div>
                </div>

                <!-- C. SUPERFICIE DE RODADURA -->
                <div class="subsection-title" style="font-size: 16px; color: var(--gris-oscuro); border-left-color: var(--gris-medio); margin-top: 40px;">
                    C. SUPERFICIE DE RODADURA (Capa de Desgaste)
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_carpeta" onchange="toggleSeverityScale('carpeta')">
                        <div class="evaluation-header">1. Integridad de la Carpeta</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_carpeta">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('carpeta', 5)">5 - Lisa y uniforme</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('carpeta', 4)">4 - Desgaste superficial</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('carpeta', 3)">3 - Piel de cocodrilo</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('carpeta', 2)">2 - Baches profundos</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('carpeta', 1)">1 - Hueco total</button>
                        </div>
                        <input type="hidden" id="severity_value_carpeta">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_carpeta" onchange="previewPhoto('carpeta')">
                            <div class="photo-preview" id="preview_carpeta"></div>
                        </div>
                    </div>
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_drenaje" onchange="toggleSeverityScale('drenaje')">
                        <div class="evaluation-header">2. Drenaje y Evacuaci√≥n Pluvial</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_drenaje">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('drenaje', 5)">5 - Pendientes correctas</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('drenaje', 4)">4 - Charcos leves</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('drenaje', 3)">3 - Obstrucci√≥n parcial</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('drenaje', 2)">2 - Fuga hacia vigas</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('drenaje', 1)">1 - Inexistente</button>
                        </div>
                        <input type="hidden" id="severity_value_drenaje">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_drenaje" onchange="previewPhoto('drenaje')">
                            <div class="photo-preview" id="preview_drenaje"></div>
                        </div>
                    </div>
                </div>

                <!-- 3.2 SUBESTRUCTURA -->
                <h3 class="subsection-title">3.2 Evaluaci√≥n de la Subestructura</h3>

                <div class="subsection-title" style="font-size: 16px; color: var(--gris-oscuro); border-left-color: var(--gris-medio);">
                    A. ESTRIBOS (Bastiones y Muros de Ala)
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_estribos_integridad" onchange="toggleSeverityScale('estribos_integridad')">
                        <div class="evaluation-header">1. Integridad Estructural y Fisuramiento</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_estribos_integridad">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('estribos_integridad', 5)">5 - Sin fisuras</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('estribos_integridad', 4)">4 - Fisuras capilares</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('estribos_integridad', 3)">3 - Fisuras moderadas</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('estribos_integridad', 2)">2 - Grietas severas</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('estribos_integridad', 1)">1 - Fractura</button>
                        </div>
                        <input type="hidden" id="severity_value_estribos_integridad">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_estribos_integridad" onchange="previewPhoto('estribos_integridad')">
                            <div class="photo-preview" id="preview_estribos_integridad"></div>
                        </div>
                    </div>
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_estribos_alineacion" onchange="toggleSeverityScale('estribos_alineacion')">
                        <div class="evaluation-header">2. Estabilidad y Alineaci√≥n</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_estribos_alineacion">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('estribos_alineacion', 5)">5 - Alineado</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('estribos_alineacion', 4)">4 - Desgaste leve</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('estribos_alineacion', 3)">3 - Filtraci√≥n</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('estribos_alineacion', 2)">2 - Sin anclaje</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('estribos_alineacion', 1)">1 - Rotaci√≥n cr√≠tica</button>
                        </div>
                        <input type="hidden" id="severity_value_estribos_alineacion">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_estribos_alineacion" onchange="previewPhoto('estribos_alineacion')">
                            <div class="photo-preview" id="preview_estribos_alineacion"></div>
                        </div>
                    </div>
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_asentamiento" onchange="toggleSeverityScale('asentamiento')">
                        <div class="evaluation-header">3. Asentamiento del Relleno y Aproches</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_asentamiento">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('asentamiento', 5)">5 - Uni√≥n perfecta</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('asentamiento', 4)">4 - Fisuras leves</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('asentamiento', 3)">3 - Asentamiento</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('asentamiento', 2)">2 - Abertura cr√≠tica</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('asentamiento', 1)">1 - Escal√≥n cr√≠tico</button>
                        </div>
                        <input type="hidden" id="severity_value_asentamiento">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_asentamiento" onchange="previewPhoto('asentamiento')">
                            <div class="photo-preview" id="preview_asentamiento"></div>
                        </div>
                    </div>
                </div>

                <!-- B. PILARES -->
                <div class="subsection-title" style="font-size: 16px; color: var(--gris-oscuro); border-left-color: var(--gris-medio); margin-top: 40px;">
                    B. PILARES / COLUMNAS
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_pilares_integridad" onchange="toggleSeverityScale('pilares_integridad')">
                        <div class="evaluation-header">1. Integridad de Columnas y Capiteles</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_pilares_integridad">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('pilares_integridad', 5)">5 - Sanos y limpios</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('pilares_integridad', 4)">4 - Manchas leves</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('pilares_integridad', 3)">3 - Fisuras/humedad</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('pilares_integridad', 2)">2 - Grietas severas</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('pilares_integridad', 1)">1 - Aplastamiento</button>
                        </div>
                        <input type="hidden" id="severity_value_pilares_integridad">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_pilares_integridad" onchange="previewPhoto('pilares_integridad')">
                            <div class="photo-preview" id="preview_pilares_integridad"></div>
                        </div>
                    </div>
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_pilares_verticalidad" onchange="toggleSeverityScale('pilares_verticalidad')">
                        <div class="evaluation-header">2. Verticalidad y Plomo</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_pilares_verticalidad">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('pilares_verticalidad', 5)">5 - Vertical</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('pilares_verticalidad', 4)">4 - Desviaci√≥n m√≠nima</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('pilares_verticalidad', 3)">3 - Inclinaci√≥n leve</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('pilares_verticalidad', 2)">2 - Pandeo visible</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('pilares_verticalidad', 1)">1 - Colapso de pila</button>
                        </div>
                        <input type="hidden" id="severity_value_pilares_verticalidad">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_pilares_verticalidad" onchange="previewPhoto('pilares_verticalidad')">
                            <div class="photo-preview" id="preview_pilares_verticalidad"></div>
                        </div>
                    </div>
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_pilares_corrosion" onchange="toggleSeverityScale('pilares_corrosion')">
                        <div class="evaluation-header">3. Corrosi√≥n y Exposici√≥n de Acero</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_pilares_corrosion">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('pilares_corrosion', 5)">5 - Recubrimiento sano</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('pilares_corrosion', 4)">4 - Manchas superficiales</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('pilares_corrosion', 3)">3 - Spalling</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('pilares_corrosion', 2)">2 - Acero expuesto</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('pilares_corrosion', 1)">1 - P√©rdida de secci√≥n</button>
                        </div>
                        <input type="hidden" id="severity_value_pilares_corrosion">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_pilares_corrosion" onchange="previewPhoto('pilares_corrosion')">
                            <div class="photo-preview" id="preview_pilares_corrosion"></div>
                        </div>
                    </div>
                </div>

                <!-- 3.3 FUNDACI√ìN Y APARATOS DE APOYO -->
                <h3 class="subsection-title">3.3 Fundaci√≥n y Aparatos de Apoyo</h3>

                <div class="alert alert-warning" id="fundacionNoVisible" style="display: none;">
                    <strong>‚ö†Ô∏è Nota:</strong> Las fundaciones no son visibles. Esta secci√≥n se omitir√° en la evaluaci√≥n.
                </div>

                <div id="seccionFundacion">
                    <div class="evaluation-item">
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="check_apoyos" onchange="toggleSeverityScale('apoyos')">
                            <div class="evaluation-header">1. Estado de los Aparatos de Apoyo</div>
                        </div>
                        
                        <div class="severity-scale" id="severity_apoyos">
                            <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                            <div class="severity-options">
                                <button type="button" class="severity-btn level-5" onclick="selectSeverity('apoyos', 5)">5 - Centrados</button>
                                <button type="button" class="severity-btn level-4" onclick="selectSeverity('apoyos', 4)">4 - Deformaci√≥n normal</button>
                                <button type="button" class="severity-btn level-3" onclick="selectSeverity('apoyos', 3)">3 - Agrietamiento</button>
                                <button type="button" class="severity-btn level-2" onclick="selectSeverity('apoyos', 2)">2 - Desplazado</button>
                                <button type="button" class="severity-btn level-1" onclick="selectSeverity('apoyos', 1)">1 - Inexistente</button>
                            </div>
                            <input type="hidden" id="severity_value_apoyos">
                            
                            <div class="photo-upload">
                                <label>Foto de Evidencia:</label>
                                <input type="file" accept="image/*" id="photo_apoyos" onchange="previewPhoto('apoyos')">
                                <div class="photo-preview" id="preview_apoyos"></div>
                            </div>
                        </div>
                    </div>

                    <div class="evaluation-item">
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="check_cabezal" onchange="toggleSeverityScale('cabezal')">
                            <div class="evaluation-header">2. Estado del Cabezal de Pilotes</div>
                        </div>
                        
                        <div class="severity-scale" id="severity_cabezal">
                            <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                            <div class="severity-options">
                                <button type="button" class="severity-btn level-5" onclick="selectSeverity('cabezal', 5)">5 - Intacto</button>
                                <button type="button" class="severity-btn level-4" onclick="selectSeverity('cabezal', 4)">4 - Abrasi√≥n superficial</button>
                                <button type="button" class="severity-btn level-3" onclick="selectSeverity('cabezal', 3)">3 - Despostillamiento</button>
                                <button type="button" class="severity-btn level-2" onclick="selectSeverity('cabezal', 2)">2 - Grietas estructurales</button>
                                <button type="button" class="severity-btn level-1" onclick="selectSeverity('cabezal', 1)">1 - Cabezal fracturado</button>
                            </div>
                            <input type="hidden" id="severity_value_cabezal">
                            
                            <div class="photo-upload">
                                <label>Foto de Evidencia:</label>
                                <input type="file" accept="image/*" id="photo_cabezal" onchange="previewPhoto('cabezal')">
                                <div class="photo-preview" id="preview_cabezal"></div>
                            </div>
                        </div>
                    </div>

                    <div class="evaluation-item">
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="check_impacto_fundacion" onchange="toggleSeverityScale('impacto_fundacion')">
                            <div class="evaluation-header">3. Da√±os por Impacto en Cimentaciones</div>
                        </div>
                        
                        <div class="severity-scale" id="severity_impacto_fundacion">
                            <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                            <div class="severity-options">
                                <button type="button" class="severity-btn level-5" onclick="selectSeverity('impacto_fundacion', 5)">5 - Sin da√±os</button>
                                <button type="button" class="severity-btn level-4" onclick="selectSeverity('impacto_fundacion', 4)">4 - Marcas superficiales</button>
                                <button type="button" class="severity-btn level-3" onclick="selectSeverity('impacto_fundacion', 3)">3 - Impacto moderado</button>
                                <button type="button" class="severity-btn level-2" onclick="selectSeverity('impacto_fundacion', 2)">2 - Impacto severo</button>
                                <button type="button" class="severity-btn level-1" onclick="selectSeverity('impacto_fundacion', 1)">1 - Destrucci√≥n</button>
                            </div>
                            <input type="hidden" id="severity_value_impacto_fundacion">
                            
                            <div class="photo-upload">
                                <label>Foto de Evidencia:</label>
                                <input type="file" accept="image/*" id="photo_impacto_fundacion" onchange="previewPhoto('impacto_fundacion')">
                                <div class="photo-preview" id="preview_impacto_fundacion"></div>
                            </div>
                        </div>
                    </div>

                    <div class="alert alert-danger">
                        <strong>‚ö†Ô∏è PELIGRO ESTRUCTURAL N¬∞1 - SOCAVACI√ìN</strong><br>
                        La socavaci√≥n es la p√©rdida de suelo que compromete la fundaci√≥n. Una socavaci√≥n de Nivel 1 o 2 requiere PRIORIDAD ALTA inmediata.
                    </div>

                    <div class="evaluation-item">
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="check_socavacion" onchange="toggleSeverityScale('socavacion')">
                            <div class="evaluation-header">4. Exposici√≥n de Cimentaci√≥n - SOCAVACI√ìN</div>
                        </div>
                        
                        <div class="severity-scale" id="severity_socavacion">
                            <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                            <div class="severity-options">
                                <button type="button" class="severity-btn level-5" onclick="selectSeverity('socavacion', 5)">5 - Enterrada</button>
                                <button type="button" class="severity-btn level-4" onclick="selectSeverity('socavacion', 4)">4 - Erosi√≥n leve</button>
                                <button type="button" class="severity-btn level-3" onclick="selectSeverity('socavacion', 3)">3 - Incipiente</button>
                                <button type="button" class="severity-btn level-2" onclick="selectSeverity('socavacion', 2)">2 - Severa</button>
                                <button type="button" class="severity-btn level-1" onclick="selectSeverity('socavacion', 1)">1 - Cr√≠tica</button>
                            </div>
                            <input type="hidden" id="severity_value_socavacion">
                            
                            <div class="photo-upload">
                                <label>Foto de Evidencia:</label>
                                <input type="file" accept="image/*" id="photo_socavacion" onchange="previewPhoto('socavacion')">
                                <div class="photo-preview" id="preview_socavacion"></div>
                            </div>
                        </div>
                    </div>

                    <div class="evaluation-item">
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="check_lavado" onchange="toggleSeverityScale('lavado')">
                            <div class="evaluation-header">5. Lavado de Material de Relleno</div>
                        </div>
                        
                        <div class="severity-scale" id="severity_lavado">
                            <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                            <div class="severity-options">
                                <button type="button" class="severity-btn level-5" onclick="selectSeverity('lavado', 5)">5 - Estable</button>
                                <button type="button" class="severity-btn level-4" onclick="selectSeverity('lavado', 4)">4 - Erosi√≥n menor</button>
                                <button type="button" class="severity-btn level-3" onclick="selectSeverity('lavado', 3)">3 - P√©rdida de material</button>
                                <button type="button" class="severity-btn level-2" onclick="selectSeverity('lavado', 2)">2 - Oquedad</button>
                                <button type="button" class="severity-btn level-1" onclick="selectSeverity('lavado', 1)">1 - Colapso</button>
                            </div>
                            <input type="hidden" id="severity_value_lavado">
                            
                            <div class="photo-upload">
                                <label>Foto de Evidencia:</label>
                                <input type="file" accept="image/*" id="photo_lavado" onchange="previewPhoto('lavado')">
                                <div class="photo-preview" id="preview_lavado"></div>
                            </div>
                        </div>
                    </div>

                    <div class="evaluation-item">
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="check_protecciones" onchange="toggleSeverityScale('protecciones')">
                            <div class="evaluation-header">6. Protecciones Hidr√°ulicas</div>
                        </div>
                        
                        <div class="severity-scale" id="severity_protecciones">
                            <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                            <div class="severity-options">
                                <button type="button" class="severity-btn level-5" onclick="selectSeverity('protecciones', 5)">5 - Nuevas e √≠ntegras</button>
                                <button type="button" class="severity-btn level-4" onclick="selectSeverity('protecciones', 4)">4 - Vegetaci√≥n leve</button>
                                <button type="button" class="severity-btn level-3" onclick="selectSeverity('protecciones', 3)">3 - Malla da√±ada</button>
                                <button type="button" class="severity-btn level-2" onclick="selectSeverity('protecciones', 2)">2 - Desplazamiento</button>
                                <button type="button" class="severity-btn level-1" onclick="selectSeverity('protecciones', 1)">1 - Destrucci√≥n total</button>
                            </div>
                            <input type="hidden" id="severity_value_protecciones">
                            
                            <div class="photo-upload">
                                <label>Foto de Evidencia:</label>
                                <input type="file" accept="image/*" id="photo_protecciones" onchange="previewPhoto('protecciones')">
                                <div class="photo-preview" id="preview_protecciones"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 3.4 CAUCE Y ENTORNO HIDR√ÅULICO -->
                <h3 class="subsection-title">3.4 Evaluaci√≥n del Cauce y Entorno Hidr√°ulico</h3>

                <div class="subsection-title" style="font-size: 16px; color: var(--gris-oscuro); border-left-color: var(--gris-medio);">
                    A. ESTADO DEL CAUCE Y OBSTRUCCIONES
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_obstruccion" onchange="toggleSeverityScale('obstruccion')">
                        <div class="evaluation-header">1. Obstrucci√≥n del √Årea Hidr√°ulica</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_obstruccion">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('obstruccion', 5)">5 - Limpio</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('obstruccion', 4)">4 - Sedimentos m√≠nimos</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('obstruccion', 3)">3 - Obstrucci√≥n parcial</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('obstruccion', 2)">2 - Troncos atrapados</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('obstruccion', 1)">1 - Obstrucci√≥n total</button>
                        </div>
                        <input type="hidden" id="severity_value_obstruccion">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_obstruccion" onchange="previewPhoto('obstruccion')">
                            <div class="photo-preview" id="preview_obstruccion"></div>
                        </div>
                    </div>
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_vegetacion" onchange="toggleSeverityScale('vegetacion')">
                        <div class="evaluation-header">2. Crecimiento de Vegetaci√≥n Invasiva</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_vegetacion">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('vegetacion', 5)">5 - Sin vegetaci√≥n</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('vegetacion', 4)">4 - Hierba baja</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('vegetacion', 3)">3 - Arbustos</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('vegetacion', 2)">2 - √Årboles</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('vegetacion', 1)">1 - Maleza densa</button>
                        </div>
                        <input type="hidden" id="severity_value_vegetacion">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_vegetacion" onchange="previewPhoto('vegetacion')">
                            <div class="photo-preview" id="preview_vegetacion"></div>
                        </div>
                    </div>
                </div>

                <div class="subsection-title" style="font-size: 16px; color: var(--gris-oscuro); border-left-color: var(--gris-medio); margin-top: 40px;">
                    B. PROTECCI√ìN DE TALUDES Y GAVIONES
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_gaviones_talud" onchange="toggleSeverityScale('gaviones_talud')">
                        <div class="evaluation-header">1. Integridad de Gaviones / Enrocados</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_gaviones_talud">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('gaviones_talud', 5)">5 - Nuevos</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('gaviones_talud', 4)">4 - Deformaci√≥n leve</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('gaviones_talud', 3)">3 - Malla oxidada</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('gaviones_talud', 2)">2 - Desplazamiento severo</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('gaviones_talud', 1)">1 - Destrucci√≥n</button>
                        </div>
                        <input type="hidden" id="severity_value_gaviones_talud">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_gaviones_talud" onchange="previewPhoto('gaviones_talud')">
                            <div class="photo-preview" id="preview_gaviones_talud"></div>
                        </div>
                    </div>
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_erosion_taludes" onchange="toggleSeverityScale('erosion_taludes')">
                        <div class="evaluation-header">2. Erosi√≥n de Taludes y Rellenos</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_erosion_taludes">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('erosion_taludes', 5)">5 - Estables</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('erosion_taludes', 4)">4 - Erosi√≥n superficial</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('erosion_taludes', 3)">3 - C√°rcavas</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('erosion_taludes', 2)">2 - Deslizamientos</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('erosion_taludes', 1)">1 - Falla total</button>
                        </div>
                        <input type="hidden" id="severity_value_erosion_taludes">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_erosion_taludes" onchange="previewPhoto('erosion_taludes')">
                            <div class="photo-preview" id="preview_erosion_taludes"></div>
                        </div>
                    </div>
                </div>

                <!-- 3.5 FUNCIONALIDAD Y SEGURIDAD VIAL -->
                <h3 class="subsection-title">3.5 Funcionalidad y Seguridad Vial</h3>

                <div class="subsection-title" style="font-size: 16px; color: var(--gris-oscuro); border-left-color: var(--gris-medio);">
                    A. SEGURIDAD VIAL (Riesgo Directo al Usuario)
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_barandas" onchange="toggleSeverityScale('barandas')">
                        <div class="evaluation-header">1. Barandas y Defensas</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_barandas">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('barandas', 5)">5 - Excelente</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('barandas', 4)">4 - Bueno</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('barandas', 3)">3 - Regular</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('barandas', 2)">2 - Malo (Riesgo)</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('barandas', 1)">1 - Cr√≠tico</button>
                        </div>
                        <input type="hidden" id="severity_value_barandas">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_barandas" onchange="previewPhoto('barandas')">
                            <div class="photo-preview" id="preview_barandas"></div>
                        </div>
                    </div>
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_superficie_rodadura" onchange="toggleSeverityScale('superficie_rodadura')">
                        <div class="evaluation-header">2. Superficie de Rodadura (Confort y Seguridad)</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_superficie_rodadura">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('superficie_rodadura', 5)">5 - Excelente</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('superficie_rodadura', 4)">4 - Bueno</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('superficie_rodadura', 3)">3 - Regular</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('superficie_rodadura', 2)">2 - Malo</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('superficie_rodadura', 1)">1 - Cr√≠tico</button>
                        </div>
                        <input type="hidden" id="severity_value_superficie_rodadura">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_superficie_rodadura" onchange="previewPhoto('superficie_rodadura')">
                            <div class="photo-preview" id="preview_superficie_rodadura"></div>
                        </div>
                    </div>
                </div>

                <div class="subsection-title" style="font-size: 16px; color: var(--gris-oscuro); border-left-color: var(--gris-medio); margin-top: 40px;">
                    B. LIMITACIONES GEOM√âTRICAS (Obsolescencia Funcional)
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_ancho_calzada_eval" onchange="toggleSeverityScale('ancho_calzada_eval')">
                        <div class="evaluation-header">1. Ancho de Calzada y Hombros</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_ancho_calzada_eval">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('ancho_calzada_eval', 5)">5 - Adecuado</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('ancho_calzada_eval', 4)">4 - Suficiente</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('ancho_calzada_eval', 3)">3 - Limitado</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('ancho_calzada_eval', 2)">2 - Estrecho</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('ancho_calzada_eval', 1)">1 - Obsoleto</button>
                        </div>
                        <input type="hidden" id="severity_value_ancho_calzada_eval">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_ancho_calzada_eval" onchange="previewPhoto('ancho_calzada_eval')">
                            <div class="photo-preview" id="preview_ancho_calzada_eval"></div>
                        </div>
                    </div>
                </div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_galibo" onchange="toggleSeverityScale('galibo')">
                        <div class="evaluation-header">2. Altura Libre / G√°libo</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_galibo">
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('galibo', 5)">5 - Adecuado</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('galibo', 4)">4 - Est√°ndar</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('galibo', 3)">3 - Limitado</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('galibo', 2)">2 - Riesgo de impacto</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('galibo', 1)">1 - Cr√≠tico</button>
                        </div>
                        <input type="hidden" id="severity_value_galibo">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_galibo" onchange="previewPhoto('galibo')">
                            <div class="photo-preview" id="preview_galibo"></div>
                        </div>
                    </div>
                </div>

                <!-- OTROS DA√ëOS -->
                <div class="subsection-title" style="margin-top: 40px;">Otros Da√±os Observados</div>

                <div class="evaluation-item">
                    <div class="checkbox-wrapper">
                        <input type="checkbox" id="check_otros" onchange="toggleSeverityScale('otros')">
                        <div class="evaluation-header">Especificar otros da√±os no listados</div>
                    </div>
                    
                    <div class="severity-scale" id="severity_otros">
                        <div class="form-group">
                            <label>Descripci√≥n del da√±o:</label>
                            <textarea id="descripcion_otros" placeholder="Describa el da√±o observado..."></textarea>
                        </div>
                        
                        <label style="font-size: 13px; font-weight: 600; display: block; margin-bottom: 10px;">Nivel de Severidad:</label>
                        <div class="severity-options">
                            <button type="button" class="severity-btn level-5" onclick="selectSeverity('otros', 5)">5 - Excelente</button>
                            <button type="button" class="severity-btn level-4" onclick="selectSeverity('otros', 4)">4 - Bueno</button>
                            <button type="button" class="severity-btn level-3" onclick="selectSeverity('otros', 3)">3 - Regular</button>
                            <button type="button" class="severity-btn level-2" onclick="selectSeverity('otros', 2)">2 - Serio</button>
                            <button type="button" class="severity-btn level-1" onclick="selectSeverity('otros', 1)">1 - Cr√≠tico</button>
                        </div>
                        <input type="hidden" id="severity_value_otros">
                        
                        <div class="photo-upload">
                            <label>Foto de Evidencia:</label>
                            <input type="file" accept="image/*" id="photo_otros" onchange="previewPhoto('otros')">
                            <div class="photo-preview" id="preview_otros"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FOTOGRAF√çAS OBLIGATORIAS -->
            <div class="section">
                <h2 class="section-title">
                    <span class="section-number">4</span>
                    Protocolo de Registro Fotogr√°fico
                </h2>

                <div class="alert alert-info">
                    <strong>üì∏ Importante:</strong> Se requieren m√≠nimo 6 fotograf√≠as obligatorias con geolocalizaci√≥n y fecha.
                </div>

                <div class="form-group">
                    <label>1. Vista General (Perfil Longitudinal) <span class="required">*</span></label>
                    <input type="file" accept="image/*" id="foto_vista1" required>
                    <p class="helper-text">Fotograf√≠a del puente completo</p>
                </div>

                <div class="form-group">
                    <label>2. Vista General Lado 2 <span class="required">*</span></label>
                    <input type="file" accept="image/*" id="foto_vista2" required>
                    <p class="helper-text">Foto del puente desde el otro sentido</p>
                </div>

                <div class="form-group">
                    <label>3. Condici√≥n del Tablero / Superficie de Rodadura <span class="required">*</span></label>
                    <input type="file" accept="image/*" id="foto_tablero" required>
                </div>

                <div class="form-group">
                    <label>4. Peor Da√±o de la Superestructura <span class="required">*</span></label>
                    <input type="file" accept="image/*" id="foto_super" required>
                </div>

                <div class="form-group">
                    <label>5. Peor Da√±o de la Subestructura <span class="required">*</span></label>
                    <input type="file" accept="image/*" id="foto_sub" required>
                </div>

                <div class="form-group">
                    <label>6. Riesgo de Socavaci√≥n / Condici√≥n del Cauce <span class="required">*</span></label>
                    <input type="file" accept="image/*" id="foto_cauce" required>
                </div>
            </div>

            <!-- EVALUACI√ìN GLOBAL -->
            <div class="section">
                <h2 class="section-title">
                    <span class="section-number">5</span>
                    Evaluaci√≥n Global y Recomendaciones
                </h2>

                <div class="result-panel" id="resultadosPanel">
                    <h3 class="result-title">Resultados de la Inspecci√≥n</h3>
                    
                    <div class="result-item">
                        <span class="result-label">Calificaci√≥n Superestructura:</span>
                        <span class="result-value" id="calif_superestructura">-</span>
                    </div>

                    <div class="result-item">
                        <span class="result-label">Calificaci√≥n Subestructura:</span>
                        <span class="result-value" id="calif_subestructura">-</span>
                    </div>

                    <div class="result-item">
                        <span class="result-label">Calificaci√≥n Cauce:</span>
                        <span class="result-value" id="calif_cauce">-</span>
                    </div>

                    <div class="result-item">
                        <span class="result-label">Calificaci√≥n General (CG):</span>
                        <span class="result-value" id="calif_general">-</span>
                    </div>

                    <div class="result-item">
                        <span class="result-label">Nivel de Prioridad:</span>
                        <span class="result-value" id="nivel_prioridad">-</span>
                    </div>

                    <div class="result-item">
                        <span class="result-label">Estado Global:</span>
                        <span class="result-value" id="estado_global">-</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Riesgo Identificado (Si aplica)</label>
                    <textarea id="riesgoIdentificado" placeholder="Ej: Socavaci√≥n severa, pilar fracturado..."></textarea>
                </div>

                <div class="form-group">
                    <label>Acci√≥n Recomendada <span class="required">*</span></label>
                    <select id="accionRecomendada" required>
                        <option value="">Seleccione...</option>
                        <option value="Mantenimiento Rutinario">Mantenimiento Rutinario</option>
                        <option value="Reparaci√≥n Menor">Reparaci√≥n Menor</option>
                        <option value="Inspecci√≥n Detallada Urgente">Inspecci√≥n Detallada Urgente</option>
                        <option value="Restricci√≥n de Carga">Restricci√≥n de Carga</option>
                        <option value="Cierre Inmediato">Cierre Inmediato</option>
                        <option value="Reemplazo">Reemplazo</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Comentarios Adicionales</label>
                    <textarea id="comentariosAdicionales" placeholder="Cualquier informaci√≥n relevante no cubierta..."></textarea>
                </div>
            </div>

            <button type="submit" class="submit-btn">
                Generar Reporte de Inspecci√≥n
            </button>
        </form>
    </div>

    <script>
        // Establecer fecha predeterminada (hoy) y l√≠mite m√°ximo
        document.addEventListener('DOMContentLoaded', function() {
            const fechaInput = document.getElementById('fechaInspeccion');
            const today = new Date().toISOString().split('T')[0];
            fechaInput.value = today;
            fechaInput.max = today;
        });

        // Funci√≥n para obtener ubicaci√≥n GPS
        function obtenerUbicacion() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        document.getElementById('latitud').value = position.coords.latitude.toFixed(6);
                        document.getElementById('longitud').value = position.coords.longitude.toFixed(6);
                        alert('‚úì Ubicaci√≥n capturada correctamente');
                    },
                    function(error) {
                        alert('Error al obtener ubicaci√≥n: ' + error.message);
                    }
                );
            } else {
                alert('La geolocalizaci√≥n no est√° soportada por este navegador.');
            }
        }

        // Mostrar/ocultar campos "Otro"
        function mostrarCampoOtro(selectId, divId) {
            const select = document.getElementById(selectId);
            const div = document.getElementById(divId);
            
            if (select.value === 'Otro') {
                div.classList.remove('hidden');
            } else {
                div.classList.add('hidden');
            }
        }

        // Actualizar c√≥digo Pre/Post autom√°ticamente
        document.getElementById('anioConstruccion').addEventListener('input', function() {
            const anio = parseInt(this.value);
            const codigo = document.getElementById('codigoPrePost');
            
            if (anio && !isNaN(anio)) {
                if (anio < 2011) {
                    codigo.value = 'PRE-C√ìDIGO';
                } else {
                    codigo.value = 'POST-C√ìDIGO';
                }
            } else {
                codigo.value = '';
            }
        });

        // Actualizar visibilidad de secci√≥n de fundaci√≥n
        function actualizarVisibilidadFundacion() {
            const tipoFundacion = document.getElementById('tipoFundacion').value;
            const seccionFundacion = document.getElementById('seccionFundacion');
            const alertaNoVisible = document.getElementById('fundacionNoVisible');
            
            if (tipoFundacion === 'No visible') {
                seccionFundacion.style.display = 'none';
                alertaNoVisible.style.display = 'flex';
            } else {
                seccionFundacion.style.display = 'block';
                alertaNoVisible.style.display = 'none';
            }
        }

        // Toggle escala de severidad
        function toggleSeverityScale(id) {
            const checkbox = document.getElementById('check_' + id);
            const scale = document.getElementById('severity_' + id);
            
            if (checkbox.checked) {
                scale.classList.add('active');
            } else {
                scale.classList.remove('active');
                // Limpiar selecci√≥n
                const buttons = scale.querySelectorAll('.severity-btn');
                buttons.forEach(btn => btn.classList.remove('selected'));
                document.getElementById('severity_value_' + id).value = '';
            }
            
            calcularCalificaciones();
        }

        // Seleccionar nivel de severidad
        function selectSeverity(id, level) {
            const buttons = document.querySelectorAll(`#severity_${id} .severity-btn`);
            buttons.forEach(btn => btn.classList.remove('selected'));
            
            event.target.closest('.severity-btn').classList.add('selected');
            document.getElementById('severity_value_' + id).value = level;
            
            calcularCalificaciones();
        }

        // Preview de fotos
        function previewPhoto(id) {
            const input = document.getElementById('photo_' + id);
            const preview = document.getElementById('preview_' + id);
            
            preview.innerHTML = '';
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    preview.appendChild(img);
                };
                
                reader.readAsDataURL(input.files[0]);
            }
        }

        // Calcular calificaciones autom√°ticamente
        function calcularCalificaciones() {
            // Arrays de IDs por categor√≠a
            const superEstructura = ['fisuras', 'corrosion', 'deflexiones', 'impacto', 'humedad', 
                                    'juntas_estado', 'juntas_limpieza', 'carpeta', 'drenaje'];
            
            const subEstructura = ['estribos_integridad', 'estribos_alineacion', 'asentamiento',
                                  'pilares_integridad', 'pilares_verticalidad', 'pilares_corrosion',
                                  'apoyos', 'cabezal', 'impacto_fundacion', 'socavacion', 'lavado', 'protecciones'];
            
            const cauce = ['obstruccion', 'vegetacion', 'gaviones_talud', 'erosion_taludes'];
            
            // Calcular m√≠nimo de cada categor√≠a
            const califSuper = calcularMinimo(superEstructura);
            const califSub = calcularMinimo(subEstructura);
            const califCauce = calcularMinimo(cauce);
            
            // Calificaci√≥n General = m√≠nimo de las tres
            const califGeneral = Math.min(califSuper, califSub, califCauce);
            
            // Actualizar display
            document.getElementById('calif_superestructura').textContent = califSuper || '-';
            document.getElementById('calif_subestructura').textContent = califSub || '-';
            document.getElementById('calif_cauce').textContent = califCauce || '-';
            document.getElementById('calif_general').textContent = califGeneral || '-';
            
            // Determinar prioridad y estado
            if (califGeneral) {
                let prioridad, estado, colorClass;
                
                // Verificar socavaci√≥n cr√≠tica
                const socavacion = parseInt(document.getElementById('severity_value_socavacion')?.value);
                
                if (socavacion === 1 || socavacion === 2 || califGeneral <= 2) {
                    prioridad = 'ALTA';
                    estado = califGeneral === 1 ? 'D - Cr√≠tico' : 'C - Pobre';
                    colorClass = 'priority-high';
                } else if (califGeneral === 3) {
                    prioridad = 'MEDIA';
                    estado = 'B - Regular';
                    colorClass = 'priority-medium';
                } else {
                    prioridad = 'BAJA';
                    estado = 'A - Bueno';
                    colorClass = 'priority-low';
                }
                
                const prioridadEl = document.getElementById('nivel_prioridad');
                prioridadEl.textContent = prioridad;
                prioridadEl.className = 'result-value ' + colorClass;
                
                const estadoEl = document.getElementById('estado_global');
                estadoEl.textContent = estado;
                estadoEl.className = 'result-value ' + colorClass;
            }
        }

        function calcularMinimo(arrayIds) {
            let minimo = 5;
            let hayValores = false;
            
            arrayIds.forEach(id => {
                const checkbox = document.getElementById('check_' + id);
                const value = document.getElementById('severity_value_' + id);
                
                if (checkbox && checkbox.checked && value && value.value) {
                    hayValores = true;
                    const val = parseInt(value.value);
                    if (val < minimo) {
                        minimo = val;
                    }
                }
            });
            
            return hayValores ? minimo : null;
        }

        // Manejar env√≠o del formulario
      // PEGA ESTE NUEVO BLOQUE
document.getElementById('inspectionForm').addEventListener('submit', function(e) {
    e.preventDefault();

    // Bloquear bot√≥n para evitar m√∫ltiples env√≠os
    const submitBtn = document.querySelector('.submit-btn');
    const originalText = submitBtn.textContent;
    submitBtn.textContent = 'Enviando a Base de Datos MOPC...';
    submitBtn.disabled = true;

    // Captura de datos para el Servidor (Metodolog√≠a AASHTO MBE)
    const formData = {
        identificador: document.getElementById('identificador').value,
        nombreEstructura: document.getElementById('nombreEstructura').value,
        provincia: document.getElementById('provincia').value,
        latitud: document.getElementById('latitud').value,
        longitud: document.getElementById('longitud').value,
        tipoEstructura: document.getElementById('tipoEstructura').value,
        // Enviamos las calificaciones visuales (Escala 1-5)
        califSuper: document.getElementById('calif_superestructura').textContent,
        califSub: document.getElementById('calif_subestructura').textContent,
        califCauce: document.getElementById('calif_cauce').textContent,
        accionRecomendada: document.getElementById('accionRecomendada').value
    };

    // URL de tu motor l√≥gico en Apps Script
    const scriptURL = 'https://script.google.com/macros/s/AKfycbxiboVjPLZFaY1mb26Gzd3BUugYX15PJtLo8GX5Sc0kTAhD4nEe7nyFx9iZVIQqXdU1eA/exec';

    // Preparar env√≠o
    const params = new URLSearchParams(formData);

    fetch(scriptURL, { 
        method: 'POST', 
        mode: 'no-cors', // Modo necesario para Google Apps Script
        body: params
    })
    .then(() => {
        alert('‚úì REPORTE ENVIADO\nLos datos se han registrado en el Inventario Nacional de Puentes.');
        this.reset(); // Limpia el formulario
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
        
        // Reiniciar los labels de calificaci√≥n
        document.getElementById('calif_superestructura').textContent = '-';
        document.getElementById('calif_subestructura').textContent = '-';
        document.getElementById('calif_cauce').textContent = '-';
        document.getElementById('calif_general').textContent = '-';
        document.getElementById('nivel_prioridad').textContent = '-';
        document.getElementById('estado_global').textContent = '-';
    })
    .catch(error => {
        console.error('Error!', error.message);
        alert('Error de conexi√≥n. Verifique su se√±al de internet.');
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
    });
});
    </script>
</body>
</html>